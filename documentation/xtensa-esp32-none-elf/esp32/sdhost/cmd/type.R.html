<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Register `CMD` reader"><title>R in esp32::sdhost::cmd - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../static.files/rustdoc-ac92e1bbe349e143.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="esp32" data-themes="" data-resource-suffix="" data-rustdoc-version="1.76.0-nightly (88269fa9e 2024-02-09) (1.76.0.1)" data-channel="nightly" data-search-js="search-2b6ce74ff89ae146.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../../static.files/storage-f2adc0d6ca4d09fb.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../../static.files/main-305769736d49e732.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-feafe1bb7466e4bd.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc type"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="logo-container" href="../../../esp32/index.html"><img src="https://avatars.githubusercontent.com/u/46717278" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../../esp32/index.html"><img src="https://avatars.githubusercontent.com/u/46717278" alt="logo"></a><h2><a href="../../../esp32/index.html">esp32</a><span class="version">0.29.0</span></h2></div><h2 class="location"><a href="#">R</a></h2><div class="sidebar-elems"><section><h3><a href="#aliased-type">Aliased type</a></h3><h3><a href="#implementations">Methods</a></h3><ul class="block method"><li><a href="#method.card_number">card_number</a></li><li><a href="#method.ccs_expected">ccs_expected</a></li><li><a href="#method.check_response_crc">check_response_crc</a></li><li><a href="#method.data_expected">data_expected</a></li><li><a href="#method.index">index</a></li><li><a href="#method.read_ceata_device">read_ceata_device</a></li><li><a href="#method.read_write">read_write</a></li><li><a href="#method.response_expect">response_expect</a></li><li><a href="#method.response_length">response_length</a></li><li><a href="#method.send_auto_stop">send_auto_stop</a></li><li><a href="#method.send_initialization">send_initialization</a></li><li><a href="#method.start_cmd">start_cmd</a></li><li><a href="#method.stop_abort_cmd">stop_abort_cmd</a></li><li><a href="#method.transfer_mode">transfer_mode</a></li><li><a href="#method.update_clock_registers_only">update_clock_registers_only</a></li><li><a href="#method.use_hole">use_hole</a></li><li><a href="#method.wait_prvdata_complete">wait_prvdata_complete</a></li></ul></section><h2><a href="index.html">In esp32::sdhost::cmd</a></h2></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../../../esp32/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../../../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Type Alias <a href="../../index.html">esp32</a>::<wbr><a href="../index.html">sdhost</a>::<wbr><a href="index.html">cmd</a>::<wbr><a class="type" href="#">R</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../../src/esp32/sdhost/cmd.rs.html#2">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub type R = <a class="type" href="../../generic/type.R.html" title="type esp32::generic::R">R</a>&lt;<a class="struct" href="struct.CMD_SPEC.html" title="struct esp32::sdhost::cmd::CMD_SPEC">CMD_SPEC</a>&gt;;</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Register <code>CMD</code> reader</p>
</div></details><h2 id="aliased-type" class="section-header">Aliased Type<a href="#aliased-type" class="anchor">§</a></h2><pre class="rust item-decl"><code>struct R { <span class="comment">/* private fields */</span> }</code></pre><h2 id="implementations" class="section-header">Implementations<a href="#implementations" class="anchor">§</a></h2><div id="implementations-list"><details class="toggle implementors-toggle" open><summary><section id="impl-R%3CCMD_SPEC%3E" class="impl"><a class="src rightside" href="../../../src/esp32/sdhost/cmd.rs.html#73-159">source</a><a href="#impl-R%3CCMD_SPEC%3E" class="anchor">§</a><h3 class="code-header">impl <a class="type" href="type.R.html" title="type esp32::sdhost::cmd::R">R</a></h3></section></summary><div class="impl-items"><details class="toggle method-toggle" open><summary><section id="method.index" class="method"><a class="src rightside" href="../../../src/esp32/sdhost/cmd.rs.html#76-78">source</a><h4 class="code-header">pub fn <a href="#method.index" class="fn">index</a>(&amp;self) -&gt; <a class="type" href="type.INDEX_R.html" title="type esp32::sdhost::cmd::INDEX_R">INDEX_R</a></h4></section></summary><div class="docblock"><p>Bits 0:5 - Command index.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.response_expect" class="method"><a class="src rightside" href="../../../src/esp32/sdhost/cmd.rs.html#81-83">source</a><h4 class="code-header">pub fn <a href="#method.response_expect" class="fn">response_expect</a>(&amp;self) -&gt; <a class="type" href="type.RESPONSE_EXPECT_R.html" title="type esp32::sdhost::cmd::RESPONSE_EXPECT_R">RESPONSE_EXPECT_R</a></h4></section></summary><div class="docblock"><p>Bit 6 - 0: No response expected from card; 1: Response expected from card.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.response_length" class="method"><a class="src rightside" href="../../../src/esp32/sdhost/cmd.rs.html#86-88">source</a><h4 class="code-header">pub fn <a href="#method.response_length" class="fn">response_length</a>(&amp;self) -&gt; <a class="type" href="type.RESPONSE_LENGTH_R.html" title="type esp32::sdhost::cmd::RESPONSE_LENGTH_R">RESPONSE_LENGTH_R</a></h4></section></summary><div class="docblock"><p>Bit 7 - 0: Short response expected from card; 1: Long response expected from card.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.check_response_crc" class="method"><a class="src rightside" href="../../../src/esp32/sdhost/cmd.rs.html#91-93">source</a><h4 class="code-header">pub fn <a href="#method.check_response_crc" class="fn">check_response_crc</a>(&amp;self) -&gt; <a class="type" href="type.CHECK_RESPONSE_CRC_R.html" title="type esp32::sdhost::cmd::CHECK_RESPONSE_CRC_R">CHECK_RESPONSE_CRC_R</a></h4></section></summary><div class="docblock"><p>Bit 8 - 0: Do not check; 1: Check response CRC. Some of command responses do not return valid CRC bits. Software should disable CRC checks for those commands in order to disable CRC checking by controller.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.data_expected" class="method"><a class="src rightside" href="../../../src/esp32/sdhost/cmd.rs.html#96-98">source</a><h4 class="code-header">pub fn <a href="#method.data_expected" class="fn">data_expected</a>(&amp;self) -&gt; <a class="type" href="type.DATA_EXPECTED_R.html" title="type esp32::sdhost::cmd::DATA_EXPECTED_R">DATA_EXPECTED_R</a></h4></section></summary><div class="docblock"><p>Bit 9 - 0: No data transfer expected; 1: Data transfer expected.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.read_write" class="method"><a class="src rightside" href="../../../src/esp32/sdhost/cmd.rs.html#101-103">source</a><h4 class="code-header">pub fn <a href="#method.read_write" class="fn">read_write</a>(&amp;self) -&gt; <a class="type" href="type.READ_WRITE_R.html" title="type esp32::sdhost::cmd::READ_WRITE_R">READ_WRITE_R</a></h4></section></summary><div class="docblock"><p>Bit 10 - 0: Read from card; 1: Write to card. Don’t care if no data is expected from card.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.transfer_mode" class="method"><a class="src rightside" href="../../../src/esp32/sdhost/cmd.rs.html#106-108">source</a><h4 class="code-header">pub fn <a href="#method.transfer_mode" class="fn">transfer_mode</a>(&amp;self) -&gt; <a class="type" href="type.TRANSFER_MODE_R.html" title="type esp32::sdhost::cmd::TRANSFER_MODE_R">TRANSFER_MODE_R</a></h4></section></summary><div class="docblock"><p>Bit 11 - Block data transfer command; 1: Stream data transfer command. Don’t care if no data expected.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.send_auto_stop" class="method"><a class="src rightside" href="../../../src/esp32/sdhost/cmd.rs.html#111-113">source</a><h4 class="code-header">pub fn <a href="#method.send_auto_stop" class="fn">send_auto_stop</a>(&amp;self) -&gt; <a class="type" href="type.SEND_AUTO_STOP_R.html" title="type esp32::sdhost::cmd::SEND_AUTO_STOP_R">SEND_AUTO_STOP_R</a></h4></section></summary><div class="docblock"><p>Bit 12 - 0: No stop command is sent at the end of data transfer; 1: Send stop command at the end of data transfer.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.wait_prvdata_complete" class="method"><a class="src rightside" href="../../../src/esp32/sdhost/cmd.rs.html#116-118">source</a><h4 class="code-header">pub fn <a href="#method.wait_prvdata_complete" class="fn">wait_prvdata_complete</a>(&amp;self) -&gt; <a class="type" href="type.WAIT_PRVDATA_COMPLETE_R.html" title="type esp32::sdhost::cmd::WAIT_PRVDATA_COMPLETE_R">WAIT_PRVDATA_COMPLETE_R</a></h4></section></summary><div class="docblock"><p>Bit 13 - 0: Send command at once, even if previous data transfer has not completed; 1: Wait for previous data transfer to complete before sending Command. The SDHOST_WAIT_PRVDATA_COMPLETE] = 0 option is typically used to query status of card during data transfer or to stop current data transfer. SDHOST_CARD_NUMBERr should be same as in previous command.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.stop_abort_cmd" class="method"><a class="src rightside" href="../../../src/esp32/sdhost/cmd.rs.html#121-123">source</a><h4 class="code-header">pub fn <a href="#method.stop_abort_cmd" class="fn">stop_abort_cmd</a>(&amp;self) -&gt; <a class="type" href="type.STOP_ABORT_CMD_R.html" title="type esp32::sdhost::cmd::STOP_ABORT_CMD_R">STOP_ABORT_CMD_R</a></h4></section></summary><div class="docblock"><p>Bit 14 - 0: Neither stop nor abort command can stop current data transfer. If abort is sent to function-number currently selected or not in data-transfer mode, then bit should be set to 0; 1: Stop or abort command intended to stop current data transfer in progress. When open-ended or predefined data transfer is in progress, and host issues stop or abort command to stop data transfer, bit should be set so that command/data state-machines of CIU can return correctly to idle state.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.send_initialization" class="method"><a class="src rightside" href="../../../src/esp32/sdhost/cmd.rs.html#126-128">source</a><h4 class="code-header">pub fn <a href="#method.send_initialization" class="fn">send_initialization</a>(&amp;self) -&gt; <a class="type" href="type.SEND_INITIALIZATION_R.html" title="type esp32::sdhost::cmd::SEND_INITIALIZATION_R">SEND_INITIALIZATION_R</a></h4></section></summary><div class="docblock"><p>Bit 15 - 0: Do not send initialization sequence (80 clocks of 1) before sending this command; 1: Send initialization sequence before sending this command. After powered on, 80 clocks must be sent to card for initialization before sending any commands to card. Bit should be set while sending first command to card so that controller will initialize clocks before sending command to card.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.card_number" class="method"><a class="src rightside" href="../../../src/esp32/sdhost/cmd.rs.html#131-133">source</a><h4 class="code-header">pub fn <a href="#method.card_number" class="fn">card_number</a>(&amp;self) -&gt; <a class="type" href="type.CARD_NUMBER_R.html" title="type esp32::sdhost::cmd::CARD_NUMBER_R">CARD_NUMBER_R</a></h4></section></summary><div class="docblock"><p>Bits 16:20 - Card number in use. Represents physical slot number of card being accessed. In SD-only mode, up to two cards are supported.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.update_clock_registers_only" class="method"><a class="src rightside" href="../../../src/esp32/sdhost/cmd.rs.html#136-138">source</a><h4 class="code-header">pub fn <a href="#method.update_clock_registers_only" class="fn">update_clock_registers_only</a>(&amp;self) -&gt; <a class="type" href="type.UPDATE_CLOCK_REGISTERS_ONLY_R.html" title="type esp32::sdhost::cmd::UPDATE_CLOCK_REGISTERS_ONLY_R">UPDATE_CLOCK_REGISTERS_ONLY_R</a></h4></section></summary><div class="docblock"><p>Bit 21 - 0: Normal command sequence; 1: Do not send commands, just update clock register value into card clock domain. Following register values are transferred into card clock domain: CLKDIV, CLRSRC, and CLKENA. Changes card clocks (change frequency, truncate off or on, and set low-frequency mode). This is provided in order to change clock frequency or stop clock without having to send command to cards. During normal command sequence, when sdhost_update_clock_registers_only = 0, following control registers are transferred from BIU to CIU: CMD, CMDARG, TMOUT, CTYPE, BLKSIZ, and BYTCNT. CIU uses new register values for new command sequence to card(s). When bit is set, there are no Command Done interrupts because no command is sent to SD_MMC_CEATA cards.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.read_ceata_device" class="method"><a class="src rightside" href="../../../src/esp32/sdhost/cmd.rs.html#141-143">source</a><h4 class="code-header">pub fn <a href="#method.read_ceata_device" class="fn">read_ceata_device</a>(&amp;self) -&gt; <a class="type" href="type.READ_CEATA_DEVICE_R.html" title="type esp32::sdhost::cmd::READ_CEATA_DEVICE_R">READ_CEATA_DEVICE_R</a></h4></section></summary><div class="docblock"><p>Bit 22 - Read access flag. 0: Host is not performing read access (RW_REG or RW_BLK)towards CE-ATA device; 1: Host is performing read access (RW_REG or RW_BLK) towards CE-ATA device. Software should set this bit to indicate that CE-ATA device is being accessed for read transfer. This bit is used to disable read data timeout indication while performing CE-ATA read transfers. Maximum value of I/O transmission delay can be no less than 10 seconds. SD/MMC should not indicate read data timeout while waiting for data from CE-ATA device.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.ccs_expected" class="method"><a class="src rightside" href="../../../src/esp32/sdhost/cmd.rs.html#146-148">source</a><h4 class="code-header">pub fn <a href="#method.ccs_expected" class="fn">ccs_expected</a>(&amp;self) -&gt; <a class="type" href="type.CCS_EXPECTED_R.html" title="type esp32::sdhost::cmd::CCS_EXPECTED_R">CCS_EXPECTED_R</a></h4></section></summary><div class="docblock"><p>Bit 23 - Expected Command Completion Signal (CCS) configuration. 0: Interrupts are not enabled in CE-ATA device (nIEN = 1 in ATA control register), or command does not expect CCS from device; 1: Interrupts are enabled in CE-ATA device (nIEN = 0), and RW_BLK command expects command completion signal from CE-ATA device. If the command expects Command Completion Signal (CCS) from the CE-ATA device, the software should set this control bit. SD/MMC sets Data Transfer Over (DTO) bit in RINTSTS register and generates interrupt to host if Data Transfer Over interrupt is not masked.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.use_hole" class="method"><a class="src rightside" href="../../../src/esp32/sdhost/cmd.rs.html#151-153">source</a><h4 class="code-header">pub fn <a href="#method.use_hole" class="fn">use_hole</a>(&amp;self) -&gt; <a class="type" href="type.USE_HOLE_R.html" title="type esp32::sdhost::cmd::USE_HOLE_R">USE_HOLE_R</a></h4></section></summary><div class="docblock"><p>Bit 29 - Use Hold Register. 0: CMD and DATA sent to card bypassing HOLD Register; 1: CMD and DATA sent to card through the HOLD Register.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.start_cmd" class="method"><a class="src rightside" href="../../../src/esp32/sdhost/cmd.rs.html#156-158">source</a><h4 class="code-header">pub fn <a href="#method.start_cmd" class="fn">start_cmd</a>(&amp;self) -&gt; <a class="type" href="type.START_CMD_R.html" title="type esp32::sdhost::cmd::START_CMD_R">START_CMD_R</a></h4></section></summary><div class="docblock"><p>Bit 31 - Start command. Once command is served by the CIU, this bit is automatically cleared. When this bit is set, host should not attempt to write to any command registers. If a write is attempted, hardware lock error is set in raw interrupt register. Once command is sent and a response is received from SD_MMC_CEATA cards, Command Done bit is set in the raw interrupt Register.</p>
</div></details></div></details></div></section></div></main></body></html>