<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Parallel IO"><title>esp_hal::parl_io - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-e935ef01ae1c1829.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="esp_hal" data-themes="" data-resource-suffix="" data-rustdoc-version="1.78.0-nightly (878c8a2a6 2024-02-29)" data-channel="nightly" data-search-js="search-dd67cee4cfa65049.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../static.files/storage-4c98445ec4002617.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-12cf3b4f4f9dc36d.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-04d5337699b92874.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../../esp_hal/index.html"><img src="https://avatars.githubusercontent.com/u/46717278" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../esp_hal/index.html"><img src="https://avatars.githubusercontent.com/u/46717278" alt="logo"></a><h2><a href="../../esp_hal/index.html">esp_hal</a><span class="version">0.15.0</span></h2></div><h2 class="location"><a href="#">Module parl_io</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li></ul></section><h2><a href="../index.html">In crate esp_hal</a></h2></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../../esp_hal/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">esp_hal</a>::<wbr><a class="mod" href="#">parl_io</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../src/esp_hal/parl_io.rs.html#1-2134">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="parallel-io"><a class="doc-anchor" href="#parallel-io">§</a>Parallel IO</h2><h3 id="overview"><a class="doc-anchor" href="#overview">§</a>Overview</h3>
<p>The Parallel IO peripheral is a general purpose parallel interface that can
be used to connect to external devices such as LED matrix, LCD display,
Printer and Camera. The peripheral has independent TX and RX units. Each
unit can have up to 8 or 16 data signals (depending on your target hardware)
plus 1 or 2 clock signals.</p>
<p>The driver uses DMA (Direct Memory Access) for efficient data transfer.</p>
<h3 id="examples"><a class="doc-anchor" href="#examples">§</a>Examples</h3><h4 id="initialization-for-tx"><a class="doc-anchor" href="#initialization-for-tx">§</a>Initialization for TX</h4>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="comment">// configure the data pins to use
</span><span class="kw">let </span>tx_pins = TxFourBits::new(io.pins.gpio1, io.pins.gpio2, io.pins.gpio3, io.pins.gpio4);

<span class="comment">// configure the valid pin which will be driven high during a TX transfer
</span><span class="kw">let </span>pin_conf = TxPinConfigWithValidPin::new(tx_pins, io.pins.gpio5);

<span class="kw">let </span><span class="kw-2">mut </span>parl_io = ParlIoTxOnly::new(
    peripherals.PARL_IO,
    dma_channel.configure(
        <span class="bool-val">false</span>,
        <span class="kw-2">&amp;mut </span>tx_descriptors,
        <span class="kw-2">&amp;mut </span>rx_descriptors,
        DmaPriority::Priority0,
    ),
    <span class="number">1u32</span>.MHz(),
    <span class="kw-2">&amp;</span>clocks,
)
.unwrap();

<span class="comment">// configure a pin for the clock signal
</span><span class="kw">let </span>cp = ClkOutPin::new(io.pins.gpio6);

<span class="kw">let </span><span class="kw-2">mut </span>parl_io_tx = parl_io
    .tx
    .with_config(pin_conf, cp, <span class="number">0</span>, SampleEdge::Normal, BitPackOrder::Msb)
    .unwrap();</code></pre></div>
<h4 id="start-tx-transfer"><a class="doc-anchor" href="#start-tx-transfer">§</a>Start TX transfer</h4>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>transfer = parl_io_tx.write_dma(buffer).unwrap();

<span class="comment">// the buffer and driver is moved into the transfer and we can get it back via
// `wait`
</span>(buffer, parl_io_tx) = transfer.wait().unwrap();</code></pre></div>
<h4 id="initialization-for-rx"><a class="doc-anchor" href="#initialization-for-rx">§</a>Initialization for RX</h4>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>rx_pins = RxFourBits::new(io.pins.gpio1, io.pins.gpio2, io.pins.gpio3, io.pins.gpio4);

<span class="kw">let </span>parl_io = ParlIoRxOnly::new(
    peripherals.PARL_IO,
    dma_channel.configure(
        <span class="bool-val">false</span>,
        <span class="kw-2">&amp;mut </span>tx_descriptors,
        <span class="kw-2">&amp;mut </span>rx_descriptors,
        DmaPriority::Priority0,
    ),
    <span class="number">1u32</span>.MHz(),
    <span class="kw-2">&amp;</span>clocks,
)
.unwrap();

<span class="kw">let </span><span class="kw-2">mut </span>parl_io_rx = parl_io
    .rx
    .with_config(rx_pins, NoClkPin, BitPackOrder::Msb, <span class="prelude-val">Some</span>(<span class="number">0xfff</span>))
    .unwrap();</code></pre></div>
<h4 id="start-rx-transfer"><a class="doc-anchor" href="#start-rx-transfer">§</a>Start RX transfer</h4>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>transfer = parl_io_rx.read_dma(buffer).unwrap();

<span class="comment">// the buffer and driver is moved into the transfer and we can get it back via
// `wait`
</span>(buffer, parl_io_rx) = transfer.wait().unwrap();</code></pre></div>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.ClkInPin.html" title="struct esp_hal::parl_io::ClkInPin">ClkInPin</a></div><div class="desc docblock-short">Wraps a GPIO pin which will be used as the TX clock input signal</div></li><li><div class="item-name"><a class="struct" href="struct.ClkOutPin.html" title="struct esp_hal::parl_io::ClkOutPin">ClkOutPin</a></div><div class="desc docblock-short">Wraps a GPIO pin which will be used as the clock output signal</div></li><li><div class="item-name"><a class="struct" href="struct.DmaTransfer.html" title="struct esp_hal::parl_io::DmaTransfer">DmaTransfer</a></div><div class="desc docblock-short">An in-progress DMA transfer.</div></li><li><div class="item-name"><a class="struct" href="struct.NoClkPin.html" title="struct esp_hal::parl_io::NoClkPin">NoClkPin</a></div><div class="desc docblock-short">Used to configure no pin as clock output</div></li><li><div class="item-name"><a class="struct" href="struct.ParlIoFullDuplex.html" title="struct esp_hal::parl_io::ParlIoFullDuplex">ParlIoFullDuplex</a></div><div class="desc docblock-short">Parallel IO in full duplex mode</div></li><li><div class="item-name"><a class="struct" href="struct.ParlIoRx.html" title="struct esp_hal::parl_io::ParlIoRx">ParlIoRx</a></div><div class="desc docblock-short">Parallel IO RX channel</div></li><li><div class="item-name"><a class="struct" href="struct.ParlIoRxOnly.html" title="struct esp_hal::parl_io::ParlIoRxOnly">ParlIoRxOnly</a></div><div class="desc docblock-short">Parallel IO in half duplex / RX only mode</div></li><li><div class="item-name"><a class="struct" href="struct.ParlIoTx.html" title="struct esp_hal::parl_io::ParlIoTx">ParlIoTx</a></div><div class="desc docblock-short">Parallel IO TX channel</div></li><li><div class="item-name"><a class="struct" href="struct.ParlIoTxOnly.html" title="struct esp_hal::parl_io::ParlIoTxOnly">ParlIoTxOnly</a></div><div class="desc docblock-short">Parallel IO in half duplex / TX only mode</div></li><li><div class="item-name"><a class="struct" href="struct.RxClkInPin.html" title="struct esp_hal::parl_io::RxClkInPin">RxClkInPin</a></div><div class="desc docblock-short">Wraps a GPIO pin which will be used as the RX clock input signal</div></li><li><div class="item-name"><a class="struct" href="struct.RxDmaTransfer.html" title="struct esp_hal::parl_io::RxDmaTransfer">RxDmaTransfer</a></div><div class="desc docblock-short">An in-progress DMA transfer.</div></li><li><div class="item-name"><a class="struct" href="struct.RxEightBits.html" title="struct esp_hal::parl_io::RxEightBits">RxEightBits</a></div><div class="desc docblock-short">Data pin configuration for 
8
bit input mode</div></li><li><div class="item-name"><a class="struct" href="struct.RxFourBits.html" title="struct esp_hal::parl_io::RxFourBits">RxFourBits</a></div><div class="desc docblock-short">Data pin configuration for 
4
bit input mode</div></li><li><div class="item-name"><a class="struct" href="struct.RxOneBit.html" title="struct esp_hal::parl_io::RxOneBit">RxOneBit</a></div><div class="desc docblock-short">Data pin configuration for 
1
bit input mode</div></li><li><div class="item-name"><a class="struct" href="struct.RxPinConfigIncludingValidPin.html" title="struct esp_hal::parl_io::RxPinConfigIncludingValidPin">RxPinConfigIncludingValidPin</a></div><div class="desc docblock-short">Pin configuration where the pin for the valid signal is the MSB pin.</div></li><li><div class="item-name"><a class="struct" href="struct.RxPinConfigWithValidPin.html" title="struct esp_hal::parl_io::RxPinConfigWithValidPin">RxPinConfigWithValidPin</a></div><div class="desc docblock-short">Pin configuration with an additional pin for the valid signal.</div></li><li><div class="item-name"><a class="struct" href="struct.RxTwoBits.html" title="struct esp_hal::parl_io::RxTwoBits">RxTwoBits</a></div><div class="desc docblock-short">Data pin configuration for 
2
bit input mode</div></li><li><div class="item-name"><a class="struct" href="struct.TxEightBits.html" title="struct esp_hal::parl_io::TxEightBits">TxEightBits</a></div><div class="desc docblock-short">Data pin configuration for 
8
bit output mode</div></li><li><div class="item-name"><a class="struct" href="struct.TxFourBits.html" title="struct esp_hal::parl_io::TxFourBits">TxFourBits</a></div><div class="desc docblock-short">Data pin configuration for 
4
bit output mode</div></li><li><div class="item-name"><a class="struct" href="struct.TxOneBit.html" title="struct esp_hal::parl_io::TxOneBit">TxOneBit</a></div><div class="desc docblock-short">Data pin configuration for 
1
bit output mode</div></li><li><div class="item-name"><a class="struct" href="struct.TxPinConfigIncludingValidPin.html" title="struct esp_hal::parl_io::TxPinConfigIncludingValidPin">TxPinConfigIncludingValidPin</a></div><div class="desc docblock-short">Pin configuration where the pin for the valid signal is the MSB pin.</div></li><li><div class="item-name"><a class="struct" href="struct.TxPinConfigWithValidPin.html" title="struct esp_hal::parl_io::TxPinConfigWithValidPin">TxPinConfigWithValidPin</a></div><div class="desc docblock-short">Pin configuration with an additional pin for the valid signal.</div></li><li><div class="item-name"><a class="struct" href="struct.TxTwoBits.html" title="struct esp_hal::parl_io::TxTwoBits">TxTwoBits</a></div><div class="desc docblock-short">Data pin configuration for 
2
bit output mode</div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.BitPackOrder.html" title="enum esp_hal::parl_io::BitPackOrder">BitPackOrder</a></div><div class="desc docblock-short">Parallel IO bit packing order</div></li><li><div class="item-name"><a class="enum" href="enum.EnableMode.html" title="enum esp_hal::parl_io::EnableMode">EnableMode</a></div><div class="desc docblock-short">Enable Mode</div></li><li><div class="item-name"><a class="enum" href="enum.EofMode.html" title="enum esp_hal::parl_io::EofMode">EofMode</a></div><div class="desc docblock-short">Generation of GDMA SUC EOF</div></li><li><div class="item-name"><a class="enum" href="enum.Error.html" title="enum esp_hal::parl_io::Error">Error</a></div><div class="desc docblock-short">Parallel IO errors</div></li><li><div class="item-name"><a class="enum" href="enum.SampleEdge.html" title="enum esp_hal::parl_io::SampleEdge">SampleEdge</a></div><div class="desc docblock-short">Parallel IO sample edge</div></li></ul></section></div></main></body></html>