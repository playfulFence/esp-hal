<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Interrupt support"><title>esp_hal::interrupt - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-e935ef01ae1c1829.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="esp_hal" data-themes="" data-resource-suffix="" data-rustdoc-version="1.78.0-nightly (878c8a2a6 2024-02-29)" data-channel="nightly" data-search-js="search-dd67cee4cfa65049.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../static.files/storage-4c98445ec4002617.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-12cf3b4f4f9dc36d.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-04d5337699b92874.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../../esp_hal/index.html"><img src="https://avatars.githubusercontent.com/u/46717278" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../esp_hal/index.html"><img src="https://avatars.githubusercontent.com/u/46717278" alt="logo"></a><h2><a href="../../esp_hal/index.html">esp_hal</a><span class="version">0.15.0</span></h2></div><h2 class="location"><a href="#">Module interrupt</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#functions">Functions</a></li></ul></section><h2><a href="../index.html">In crate esp_hal</a></h2></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../../esp_hal/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">esp_hal</a>::<wbr><a class="mod" href="#">interrupt</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../src/esp_hal/interrupt/mod.rs.html#1-63">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="interrupt-support"><a class="doc-anchor" href="#interrupt-support">§</a>Interrupt support</h2><h3 id="overview"><a class="doc-anchor" href="#overview">§</a>Overview</h3>
<p>The <code>interrupt</code> driver is a crucial module for ESP chips. Its primary
purpose is to manage and handle interrupts, which are asynchronous events
requiring immediate attention from the CPU. Interrupts are essential in
various applications, such as real-time tasks, I/O communications, and
handling external events like hardware signals.</p>
<p>The core functionality of the <code>interrupt</code> driver revolves around the
management of interrupts. When an interrupt occurs, it temporarily stops the
ongoing CPU operations, saves its current state, and starts executing the
corresponding interrupt service routine (ISR). The interrupt service routine
is a user-defined function that performs the necessary actions to handle the
specific interrupt. Once the ISR is executed, the driver restores the saved
CPU state and resumes normal program execution.</p>
<p>In scenarios where multiple interrupts may occur simultaneously, the
interrupt driver determines the <code>priority</code> of each interrupt. This
prioritization ensures that critical or high-priority tasks are handled
first. It helps prevent delays in time-sensitive applications and allows the
system to allocate resources efficiently. This functionality is provided and
implemented by the <code>priority</code> enum.</p>
<h3 id="example"><a class="doc-anchor" href="#example">§</a>Example</h3>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="attr">#[entry]
</span><span class="kw">fn </span>main() -&gt; ! {
    ...
    critical_section::with(|cs| SWINT.borrow_ref_mut(cs).replace(sw_int));

    interrupt::enable(
        peripherals::Interrupt::FROM_CPU_INTR0,
        interrupt::Priority::Priority1,
    )
    .unwrap();

    <span class="kw">loop </span>{}
}

<span class="attr">#[interrupt]
</span><span class="kw">fn </span>FROM_CPU_INTR0() {
    <span class="macro">esp_println::println!</span>(<span class="string">"SW interrupt0"</span>);
    critical_section::with(|cs| {
        SWINT
            .borrow_ref_mut(cs)
            .as_mut()
            .unwrap()
            .reset(SoftwareInterrupt::SoftwareInterrupt0);
    });
}</code></pre></div>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.TrapFrame.html" title="struct esp_hal::interrupt::TrapFrame">TrapFrame</a></div><div class="desc docblock-short">Registers saved in trap handler</div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.CpuInterrupt.html" title="enum esp_hal::interrupt::CpuInterrupt">CpuInterrupt</a></div><div class="desc docblock-short">Enumeration of available CPU interrupts.
It is possible to create a handler for each of the interrupts. (e.g.
<code>interrupt3</code>)</div></li><li><div class="item-name"><a class="enum" href="enum.Error.html" title="enum esp_hal::interrupt::Error">Error</a></div><div class="desc docblock-short">Interrupt Error</div></li><li><div class="item-name"><a class="enum" href="enum.InterruptKind.html" title="enum esp_hal::interrupt::InterruptKind">InterruptKind</a></div><div class="desc docblock-short">Interrupt kind</div></li><li><div class="item-name"><a class="enum" href="enum.Priority.html" title="enum esp_hal::interrupt::Priority">Priority</a></div><div class="desc docblock-short">Interrupt priority levels.</div></li></ul><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.clear.html" title="fn esp_hal::interrupt::clear">clear</a></div><div class="desc docblock-short">Clear a CPU interrupt</div></li><li><div class="item-name"><a class="fn" href="fn.disable.html" title="fn esp_hal::interrupt::disable">disable</a></div><div class="desc docblock-short">Disable the given peripheral interrupt.</div></li><li><div class="item-name"><a class="fn" href="fn.enable.html" title="fn esp_hal::interrupt::enable">enable</a></div><div class="desc docblock-short">Enables a interrupt at a given priority</div></li><li><div class="item-name"><a class="fn" href="fn.enable_cpu_interrupt.html" title="fn esp_hal::interrupt::enable_cpu_interrupt">enable_cpu_interrupt</a><sup title="unsafe function">⚠</sup></div><div class="desc docblock-short">Enable a CPU interrupt</div></li><li><div class="item-name"><a class="fn" href="fn.get_status.html" title="fn esp_hal::interrupt::get_status">get_status</a></div><div class="desc docblock-short">Get status of peripheral interrupts</div></li><li><div class="item-name"><a class="fn" href="fn.interrupt1.html" title="fn esp_hal::interrupt::interrupt1">interrupt1</a><sup title="unsafe function">⚠</sup></div></li><li><div class="item-name"><a class="fn" href="fn.interrupt2.html" title="fn esp_hal::interrupt::interrupt2">interrupt2</a><sup title="unsafe function">⚠</sup></div></li><li><div class="item-name"><a class="fn" href="fn.interrupt3.html" title="fn esp_hal::interrupt::interrupt3">interrupt3</a><sup title="unsafe function">⚠</sup></div></li><li><div class="item-name"><a class="fn" href="fn.interrupt4.html" title="fn esp_hal::interrupt::interrupt4">interrupt4</a><sup title="unsafe function">⚠</sup></div></li><li><div class="item-name"><a class="fn" href="fn.interrupt5.html" title="fn esp_hal::interrupt::interrupt5">interrupt5</a><sup title="unsafe function">⚠</sup></div></li><li><div class="item-name"><a class="fn" href="fn.interrupt6.html" title="fn esp_hal::interrupt::interrupt6">interrupt6</a><sup title="unsafe function">⚠</sup></div></li><li><div class="item-name"><a class="fn" href="fn.interrupt7.html" title="fn esp_hal::interrupt::interrupt7">interrupt7</a><sup title="unsafe function">⚠</sup></div></li><li><div class="item-name"><a class="fn" href="fn.interrupt8.html" title="fn esp_hal::interrupt::interrupt8">interrupt8</a><sup title="unsafe function">⚠</sup></div></li><li><div class="item-name"><a class="fn" href="fn.interrupt9.html" title="fn esp_hal::interrupt::interrupt9">interrupt9</a><sup title="unsafe function">⚠</sup></div></li><li><div class="item-name"><a class="fn" href="fn.interrupt10.html" title="fn esp_hal::interrupt::interrupt10">interrupt10</a><sup title="unsafe function">⚠</sup></div></li><li><div class="item-name"><a class="fn" href="fn.interrupt11.html" title="fn esp_hal::interrupt::interrupt11">interrupt11</a><sup title="unsafe function">⚠</sup></div></li><li><div class="item-name"><a class="fn" href="fn.interrupt12.html" title="fn esp_hal::interrupt::interrupt12">interrupt12</a><sup title="unsafe function">⚠</sup></div></li><li><div class="item-name"><a class="fn" href="fn.interrupt13.html" title="fn esp_hal::interrupt::interrupt13">interrupt13</a><sup title="unsafe function">⚠</sup></div></li><li><div class="item-name"><a class="fn" href="fn.interrupt14.html" title="fn esp_hal::interrupt::interrupt14">interrupt14</a><sup title="unsafe function">⚠</sup></div></li><li><div class="item-name"><a class="fn" href="fn.interrupt15.html" title="fn esp_hal::interrupt::interrupt15">interrupt15</a><sup title="unsafe function">⚠</sup></div></li><li><div class="item-name"><a class="fn" href="fn.interrupt16.html" title="fn esp_hal::interrupt::interrupt16">interrupt16</a><sup title="unsafe function">⚠</sup></div></li><li><div class="item-name"><a class="fn" href="fn.interrupt17.html" title="fn esp_hal::interrupt::interrupt17">interrupt17</a><sup title="unsafe function">⚠</sup></div></li><li><div class="item-name"><a class="fn" href="fn.interrupt18.html" title="fn esp_hal::interrupt::interrupt18">interrupt18</a><sup title="unsafe function">⚠</sup></div></li><li><div class="item-name"><a class="fn" href="fn.interrupt19.html" title="fn esp_hal::interrupt::interrupt19">interrupt19</a><sup title="unsafe function">⚠</sup></div></li><li><div class="item-name"><a class="fn" href="fn.map.html" title="fn esp_hal::interrupt::map">map</a><sup title="unsafe function">⚠</sup></div><div class="desc docblock-short">Assign a peripheral interrupt to an CPU interrupt.</div></li><li><div class="item-name"><a class="fn" href="fn.set_kind.html" title="fn esp_hal::interrupt::set_kind">set_kind</a></div><div class="desc docblock-short">Set the interrupt kind (i.e. level or edge) of an CPU interrupt</div></li><li><div class="item-name"><a class="fn" href="fn.set_priority.html" title="fn esp_hal::interrupt::set_priority">set_priority</a><sup title="unsafe function">⚠</sup></div><div class="desc docblock-short">Set the priority level of an CPU interrupt</div></li></ul></section></div></main></body></html>